[gd_scene load_steps=15 format=4 uid="uid://dejbiswo8rnoi"]

[ext_resource type="PackedScene" uid="uid://c4hvjp22ok276" path="res://Scenes/Entities/Player/Character.tscn" id="1_m7oyx"]
[ext_resource type="TileSet" uid="uid://u8qkhniw6s8u" path="res://Assets/Sprites/environment/TileMap.tres" id="1_yppru"]
[ext_resource type="PackedScene" uid="uid://ccxhqwfuyr60" path="res://Scenes/UI/HUD.tscn" id="4_uaxa7"]
[ext_resource type="Script" uid="uid://cfk61wdwaq7r6" path="res://Code/Camera.cs" id="4_vqmdy"]
[ext_resource type="Resource" uid="uid://d1il8gelcfaqa" path="res://Resources/Recipes/testRecipe.tres" id="5_j3d0r"]
[ext_resource type="Texture2D" uid="uid://3ps2vy4q4qah" path="res://Assets/Sprites/characters/dwarf.png" id="5_vqmdy"]
[ext_resource type="PackedScene" uid="uid://cegbc5yym6dn2" path="res://Entities/Items/GenericItem.tscn" id="5_xa8a6"]
[ext_resource type="Resource" uid="uid://dpuw55q3eqwkm" path="res://Resources/Items/ingotItem.tres" id="6_11nrr"]
[ext_resource type="Resource" uid="uid://db5qq1a3ir2ty" path="res://Resources/Items/logItem.tres" id="7_11nrr"]
[ext_resource type="PackedScene" uid="uid://dqh3oq2qyafiu" path="res://Code/RecipeSystem/CraftingStation.tscn" id="7_jey54"]
[ext_resource type="Script" uid="uid://dpq804w6fy4nf" path="res://Code/RecipeSystem/BaseRecipe.cs" id="8_jey54"]
[ext_resource type="PackedScene" uid="uid://hxf0gtf3x5pb" path="res://Scenes/Entities/NPC/Npc.tscn" id="9_xa8a6"]
[ext_resource type="Resource" uid="uid://0xv5lxlnyfl7" path="res://Resources/Npcs/Npc01.tres" id="13_j3d0r"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_vqmdy"]
vertices = PackedVector2Array(1207.85, 703.992, 127.992, 1245.4, -1081.83, 639.992, 0, 97.5938)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, 92, 1219, 704, 128, 1251, -1093, 640)])
agent_radius = 32.0

[node name="Node2D" type="Node2D"]

[node name="Isometric" type="Node2D" parent="."]
scale = Vector2(4, 4)

[node name="Character" parent="Isometric" instance=ExtResource("1_m7oyx")]
position = Vector2(0, 145)

[node name="BuildingMap" type="TileMapLayer" parent="Isometric"]
y_sort_enabled = true
tile_map_data = PackedByteArray("AAABAAIAAAAEAAAAAAABAAMAAAAEAAAAAAABAAQAAAAEAAAAAAABAAUAAAAEAAAAAAABAAYAAAAEAAAAAAABAAcAAAAEAAAAAAABAAgAAAAEAAAAAAABAAkAAAAEAAAAAAABAAoAAAAEAAAAAAABAAsAAAAEAAAAAAABAAwAAAAEAAAAAAABAA0AAAAEAAAAAAABAA4AAAAEAAAAAAABAA8AAAAEAAAAAAABABAAAAAEAAAAAAABABEAAAAEAAAAAAABABIAAAAEAAAAAAACAAIAAAAEAAAAAAACAAMAAAAEAAAAAAACAAQAAAAEAAAAAAACAAUAAAAEAAAAAAACAAYAAAAEAAAAAAACAAcAAAAEAAAAAAACAAgAAAAEAAAAAAACAAkAAAAEAAAAAAACAAoAAAAEAAAAAAACAAsAAAAEAAAAAAACAAwAAAAEAAAAAAACAA0AAAAEAAAAAAACAA4AAAAEAAAAAAACAA8AAAAEAAAAAAACABAAAAAEAAAAAAACABEAAAAEAAAAAAACABIAAAAEAAAAAAADAAIAAAAEAAAAAAADAAMAAAAEAAAAAAADAAQAAAAEAAAAAAADAAUAAAAEAAAAAAADAAYAAAAEAAAAAAADAAcAAAAEAAAAAAADAAgAAAAEAAAAAAADAAkAAAAEAAAAAAADAAoAAAAEAAAAAAADAAsAAAAEAAAAAAADAAwAAAAEAAAAAAADAA0AAAAEAAAAAAADAA4AAAAEAAAAAAADAA8AAAAEAAAAAAADABAAAAAEAAAAAAADABEAAAAEAAAAAAADABIAAAAEAAAAAAAEAAIAAAAEAAAAAAAEAAMAAAAEAAAAAAAEAAQAAAAEAAAAAAAEAAUAAAAEAAAAAAAEAAYAAAAEAAAAAAAEAAcAAAAEAAAAAAAEAAgAAAAEAAAAAAAEAAkAAAAEAAAAAAAEAAoAAAAEAAAAAAAEAAsAAAAEAAAAAAAEAAwAAAAEAAAAAAAEAA0AAAAEAAAAAAAEAA4AAAAEAAAAAAAEAA8AAAAEAAAAAAAEABAAAAAEAAAAAAAEABEAAAAEAAAAAAAEABIAAAAEAAAAAAAFAAIAAAAEAAAAAAAFAAMAAAAEAAAAAAAFAAQAAAAEAAAAAAAFAAUAAAAEAAAAAAAFAAYAAAAEAAAAAAAFAAcAAAAEAAAAAAAFAAgAAAAEAAAAAAAFAAkAAAAEAAAAAAAFAAoAAAAEAAAAAAAFAAsAAAAEAAAAAAAFAAwAAAAEAAAAAAAFAA0AAAAEAAAAAAAFAA4AAAAEAAAAAAAFAA8AAAAEAAAAAAAFABAAAAAEAAAAAAAFABEAAAAEAAAAAAAFABIAAAAEAAAAAAAGAAIAAAAEAAAAAAAGAAMAAAAEAAAAAAAGAAQAAAAEAAAAAAAGAAUAAAAEAAAAAAAGAAYAAAAEAAAAAAAGAAcAAAAEAAAAAAAGAAgAAAAEAAAAAAAGAAkAAAAEAAAAAAAGAAoAAAAEAAAAAAAGAAsAAAAEAAAAAAAGAAwAAAAEAAAAAAAGAA0AAAAEAAAAAAAGAA4AAAAEAAAAAAAGAA8AAAAEAAAAAAAGABAAAAAEAAAAAAAGABEAAAAEAAAAAAAGABIAAAAEAAAAAAAHAAIAAAAEAAAAAAAHAAMAAAAEAAAAAAAHAAQAAAAEAAAAAAAHAAUAAAAEAAAAAAAHAAYAAAAEAAAAAAAHAAcAAAAEAAAAAAAHAAgAAAAEAAAAAAAHAAkAAAAEAAAAAAAHAAoAAAAEAAAAAAAHAAsAAAAEAAAAAAAHAAwAAAAEAAAAAAAHAA0AAAAEAAAAAAAHAA4AAAAEAAAAAAAHAA8AAAAEAAAAAAAHABAAAAAEAAAAAAAHABEAAAAEAAAAAAAHABIAAAAEAAAAAAAIAAIAAAAEAAAAAAAIAAMAAAAEAAAAAAAIAAQAAAAEAAAAAAAIAAUAAAAEAAAAAAAIAAYAAAAEAAAAAAAIAAcAAAAEAAAAAAAIAAgAAAAEAAAAAAAIAAkAAAAEAAAAAAAIAAoAAAAEAAAAAAAIAAsAAAAEAAAAAAAIAAwAAAAEAAAAAAAIAA0AAAAEAAAAAAAIAA4AAAAEAAAAAAAIAA8AAAAEAAAAAAAIABAAAAAEAAAAAAAIABEAAAAEAAAAAAAIABIAAAAEAAAAAAAJAAIAAAAEAAAAAAAJAAMAAAAEAAAAAAAJAAQAAAAEAAAAAAAJAAUAAAAEAAAAAAAJAAYAAAAEAAAAAAAJAAcAAAAEAAAAAAAJAAgAAAAEAAAAAAAJAAkAAAAEAAAAAAAJAAoAAAAEAAAAAAAJAAsAAAAEAAAAAAAJAAwAAAAEAAAAAAAJAA0AAAAEAAAAAAAJAA4AAAAEAAAAAAAJAA8AAAAEAAAAAAAJABAAAAAEAAAAAAAJABEAAAAEAAAAAAAJABIAAAAEAAAAAAAKAAIAAAAEAAAAAAAKAAMAAAAEAAAAAAAKAAQAAAAEAAAAAAAKAAUAAAAEAAAAAAAKAAYAAAAEAAAAAAAKAAcAAAAEAAAAAAAKAAgAAAAEAAAAAAAKAAkAAAAEAAAAAAAKAAoAAAAEAAAAAAAKAAsAAAAEAAAAAAAKAAwAAAAEAAAAAAAKAA0AAAAEAAAAAAAKAA4AAAAEAAAAAAAKAA8AAAAEAAAAAAAKABAAAAAEAAAAAAAKABEAAAAEAAAAAAAKABIAAAAEAAAAAAALAAIAAAAEAAAAAAALAAMAAAAEAAAAAAALAAQAAAAEAAAAAAALAAUAAAAEAAAAAAALAAYAAAAEAAAAAAALAAcAAAAEAAAAAAALAAgAAAAEAAAAAAALAAkAAAAEAAAAAAALAAoAAAAEAAAAAAALAAsAAAAEAAAAAAALAAwAAAAEAAAAAAALAA0AAAAEAAAAAAALAA4AAAAEAAAAAAALAA8AAAAEAAAAAAALABAAAAAEAAAAAAALABEAAAAEAAAAAAALABIAAAAEAAAAAAAMAAIAAAAEAAAAAAAMAAMAAAAEAAAAAAAMAAQAAAAEAAAAAAAMAAUAAAAEAAAAAAAMAAYAAAAEAAAAAAAMAAcAAAAEAAAAAAAMAAgAAAAEAAAAAAAMAAkAAAAEAAAAAAAMAAoAAAAEAAAAAAAMAAsAAAAEAAAAAAAMAAwAAAAEAAAAAAAMAA0AAAAEAAAAAAAMAA4AAAAEAAAAAAAMAA8AAAAEAAAAAAAMABAAAAAEAAAAAAAMABEAAAAEAAAAAAAMABIAAAAEAAAAAAANAAIAAAAEAAAAAAANAAMAAAAEAAAAAAANAAQAAAAEAAAAAAANAAUAAAAEAAAAAAANAAYAAAAEAAAAAAANAAcAAAAEAAAAAAANAAgAAAAEAAAAAAANAAkAAAAEAAAAAAANAAoAAAAEAAAAAAANAAsAAAAEAAAAAAANAAwAAAAEAAAAAAANAA0AAAAEAAAAAAANAA4AAAAEAAAAAAANAA8AAAAEAAAAAAANABAAAAAEAAAAAAANABEAAAAEAAAAAAANABIAAAAEAAAAAAAOAAIAAAAEAAAAAAAOAAMAAAAEAAAAAAAOAAQAAAAEAAAAAAAOAAUAAAAEAAAAAAAOAAYAAAAEAAAAAAAOAAcAAAAEAAAAAAAOAAgAAAAEAAAAAAAOAAkAAAAEAAAAAAAOAAoAAAAEAAAAAAAOAAsAAAAEAAAAAAAOAAwAAAAEAAAAAAAOAA0AAAAEAAAAAAAOAA4AAAAEAAAAAAAOAA8AAAAEAAAAAAAOABAAAAAEAAAAAAAOABEAAAAEAAAAAAAOABIAAAAEAAAAAAAPAAIAAAAEAAAAAAAPAAMAAAAEAAAAAAAPAAQAAAAEAAAAAAAPAAUAAAAEAAAAAAAPAAYAAAAEAAAAAAAPAAcAAAAEAAAAAAAPAAgAAAAEAAAAAAAPAAkAAAAEAAAAAAAPAAoAAAAEAAAAAAAPAAsAAAAEAAAAAAAPAAwAAAAEAAAAAAAPAA0AAAAEAAAAAAAPAA4AAAAEAAAAAAAPAA8AAAAEAAAAAAAPABAAAAAEAAAAAAAPABEAAAAEAAAAAAAPABIAAAAEAAAAAAAQAAIAAAAEAAAAAAAQAAMAAAAEAAAAAAAQAAQAAAAEAAAAAAAQAAUAAAAEAAAAAAAQAAYAAAAEAAAAAAAQAAcAAAAEAAAAAAAQAAgAAAAEAAAAAAAQAAkAAAAEAAAAAAAQAAoAAAAEAAAAAAAQAAsAAAAEAAAAAAAQAAwAAAAEAAAAAAAQAA0AAAAEAAAAAAAQAA4AAAAEAAAAAAAQAA8AAAAEAAAAAAAQABAAAAAEAAAAAAAQABEAAAAEAAAAAAAQABIAAAAEAAAAAAARAAIAAAAEAAAAAAARAAMAAAAEAAAAAAARAAQAAAAEAAAAAAARAAUAAAAEAAAAAAARAAYAAAAEAAAAAAARAAcAAAAEAAAAAAARAAgAAAAEAAAAAAARAAkAAAAEAAAAAAARAAoAAAAEAAAAAAARAAsAAAAEAAAAAAARAAwAAAAEAAAAAAARAA0AAAAEAAAAAAARAA4AAAAEAAAAAAARAA8AAAAEAAAAAAARABAAAAAEAAAAAAARABEAAAAEAAAAAAARABIAAAAEAAAAAAASAAIAAAAEAAAAAAASAAMAAAAEAAAAAAASAAQAAAAEAAAAAAASAAUAAAAEAAAAAAASAAYAAAAEAAAAAAASAAcAAAAEAAAAAAASAAgAAAAEAAAAAAASAAkAAAAEAAAAAAASAAoAAAAEAAAAAAASAAsAAAAEAAAAAAASAAwAAAAEAAAAAAASAA0AAAAEAAAAAAASAA4AAAAEAAAAAAASAA8AAAAEAAAAAAASABAAAAAEAAAAAAASABEAAAAEAAAAAAASABIAAAAEAAAAAAATAAIAAAAEAAAAAAATAAMAAAAEAAAAAAATAAQAAAAEAAAAAAATAAUAAAAEAAAAAAATAAYAAAAEAAAAAAATAAcAAAAEAAAAAAATAAgAAAAEAAAAAAATAAkAAAAEAAAAAAATAAoAAAAEAAAAAAATAAsAAAAEAAAAAAATAAwAAAAEAAAAAAATAA0AAAAEAAAAAAATAA4AAAAEAAAAAAATAA8AAAAEAAAAAAATABAAAAAEAAAAAAATABEAAAAEAAAAAAATABIAAAAEAAAAAAAUAAEAAQABAAEAAAAUAAIAAQABAAEAAAAUAAMAAQABAAEAAAAUAAQAAQABAAEAAAAUAAUAAQABAAEAAAAUAAYAAQABAAEAAAAUAAcAAQABAAEAAAAUAAgAAQABAAEAAAAUAAkAAQABAAEAAAAUAAoAAQABAAEAAAAUAAsAAQABAAEAAAAUAAwAAQABAAEAAAAUAA0AAQABAAEAAAAUAA4AAQABAAEAAAAUAA8AAQABAAEAAAAUABAAAQABAAEAAAAUABEAAQABAAEAAAAUABIAAQABAAEAAAAUABMAAQABAAEAAAATABMAAQABAAEAAAASABMAAQABAAEAAAARABMAAQABAAEAAAAQABMAAQABAAEAAAAPABMAAQABAAEAAAAOABMAAQABAAEAAAANABMAAQABAAEAAAAMABMAAQABAAEAAAALABMAAQABAAEAAAAKABMAAQABAAEAAAAJABMAAQABAAEAAAAIABMAAQABAAEAAAAHABMAAQABAAEAAAAGABMAAQABAAEAAAAFABMAAQABAAEAAAAEABMAAQABAAEAAAADABMAAQABAAEAAAACABMAAQABAAEAAAABABMAAQABAAEAAAAAABMAAQABAAEAAAAAABIAAQABAAEAAAAAABEAAQABAAEAAAAAABAAAQABAAEAAAAAAA8AAQABAAEAAAAAAA4AAQABAAEAAAAAAA0AAQABAAEAAAAAAAwAAQABAAEAAAAAAAsAAQABAAEAAAAAAAoAAQABAAEAAAAAAAkAAQABAAEAAAAAAAgAAQABAAEAAAAAAAcAAQABAAEAAAAAAAYAAQABAAEAAAAAAAUAAQABAAEAAAAAAAQAAQABAAEAAAAAAAMAAQABAAEAAAAAAAIAAQABAAEAAAAAAAEAAQABAAEAAAABAAEAAQABAAEAAAACAAEAAQABAAEAAAADAAEAAQABAAEAAAAEAAEAAQABAAEAAAAFAAEAAQABAAEAAAAGAAEAAQABAAEAAAAHAAEAAQABAAEAAAAIAAEAAQABAAEAAAAJAAEAAQABAAEAAAAKAAEAAQABAAEAAAALAAEAAQABAAEAAAAMAAEAAQABAAEAAAANAAEAAQABAAEAAAAOAAEAAQABAAEAAAAPAAEAAQABAAEAAAAQAAEAAQABAAEAAAARAAEAAQABAAEAAAASAAEAAQABAAEAAAATAAEAAQABAAEAAAA=")
tile_set = ExtResource("1_yppru")
x_draw_order_reversed = true
collision_visibility_mode = 1

[node name="Collison" type="TileMapLayer" parent="Isometric/BuildingMap"]
y_sort_enabled = true
position = Vector2(-0.25, 0)
tile_map_data = PackedByteArray("AAALAAgAAQABAAEAAAAKAAcAAQABAAEAAAAKAAgAAQABAAEAAAALAAcAAQABAAEAAAANAAoAAAAJAAUAAAANAAgAAAAJAAUAAAALAAUAAAAJAAUAAAAHAAYAAAAJAAUAAAAGAAoAAAAJAAUAAAALAAwAAAAJAAUAAAAPAA0AAAAJAAUAAAA=")
tile_set = ExtResource("1_yppru")
x_draw_order_reversed = true

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="Isometric"]
visible = false
scale = Vector2(0.25, 0.25)
navigation_polygon = SubResource("NavigationPolygon_vqmdy")
navigation_layers = 3

[node name="TestTarget" type="Sprite2D" parent="Isometric"]
position = Vector2(456.75, 160.5)
texture = ExtResource("5_vqmdy")

[node name="GenericItemArea" parent="Isometric" instance=ExtResource("5_xa8a6")]
position = Vector2(-123.5, 134.75)
BaseItem = ExtResource("6_11nrr")

[node name="GenericItemArea2" parent="Isometric" instance=ExtResource("5_xa8a6")]
position = Vector2(-116.5, 167)
BaseItem = ExtResource("7_11nrr")

[node name="CraftingStation" parent="Isometric" instance=ExtResource("7_jey54")]
position = Vector2(63.75, 134.5)
DisplayName = null
Description = null
Recipes = Array[ExtResource("8_jey54")]([ExtResource("5_j3d0r")])

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("FollowingNode")]
script = ExtResource("4_vqmdy")
FollowingNode = NodePath("../Isometric/Character")
SmoothingSpeed = null

[node name="Hud" parent="Camera2D" instance=ExtResource("4_uaxa7")]

[node name="Npc" parent="." node_paths=PackedStringArray("Target", "_navAgent", "_animationPlayer", "_sprite2D") instance=ExtResource("9_xa8a6")]
position = Vector2(376, 1005)
scale = Vector2(4, 4)
_lastTexture = null
_speed = 72.0
State = "idle"
Direction = Vector2(0, 1)
_directionName = "Down"
DoBehaviour = true
Target = NodePath("../Isometric/CraftingStation")
_navAgent = NodePath("NavigationAgent2D")
_npcResource = ExtResource("13_j3d0r")
_animationPlayer = NodePath("AnimationPlayer")
_sprite2D = NodePath("Sprite2D")
_lastTargetPosition = Vector2(0, 0)
_stopThreshold = 5.0
_pathUpdateThreshold = 32.0
